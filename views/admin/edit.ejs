<% layout('../layout') -%>
<div class="content-page">
   <!-- Start content -->
   <div class="content">
      <div class="container">
         <div class="row">
            <div class="col-xs-12">
               <div class="page-title-box">
                  <h4 class="page-title">Edit Profile </h4>                  
                  <div class="clearfix"></div>
               </div>
            </div>
         </div>
         <!-- end row -->
		 <% if ( error.length > 0 ) { %>
		<div class="alert alert-danger fade in alert-dismissible">
			<a href="#" class="close" data-dismiss="alert" aria-label="close" title="close">×</a>
			<i></i><i class="fa fa-exclamation-triangle"></i> <%= error %>
		</div>
		<% } %>
		<% if ( success.length > 0 ) { %>
		<div class="alert alert-success fade in alert-dismissible" style="margin-top:18px;">
			<a href="#" class="close" data-dismiss="alert" aria-label="close" title="close">×</a><i class="fa fa-check"></i> <%= success %>
		</div>
		<% } %>
         <div class="row">
            <div class="col-sm-12">
               <div class="card-box">                 
                  <div class="row">
				  <form class="form-horizontal" id="edit_form" role="form" action="/admin/profile/edit" method="post">
                     <div class="col-md-6">                        
					   <div class="form-group">
						  <label class="col-md-2 control-label">First Name</label>
						  <div class="col-md-10">
							 <input type="text" name="firstname" id="firstname" class="form-control" value="<%=dataUser.firstname%>" autocomplete="off">
						  </div>
					   </div>
					   <div class="form-group">
						  <label class="col-md-2 control-label">Last Name</label>
						  <div class="col-md-10">
							 <input type="text" name="lastname" id="lastname"  class="form-control" value="<%=dataUser.lastname%>" autocomplete="off">
						  </div>
					   </div>
					   <div class="form-group">
						  <label class="col-md-2 control-label">Email</label>
						  <div class="col-md-10">
							 <input type="text" name="email" id="email"  class="form-control" value="<%=dataUser.email%>" autocomplete="off">
						  </div>
					   </div>
					   <div class="form-group">
						  <label class="col-md-2 control-label">Username</label>
						  <div class="col-md-10">
							 <input type="text" name="username" id="username"  class="form-control" value="<%=dataUser.username%>" autocomplete="off">
						  </div>
					   </div>
						<div class="form-group">
						  <label class="col-md-2 control-label"></label>
						  <div class="col-md-10">
							 <button type="submit" class="btn btn-purple waves-effect waves-light">Submit</button>
						  </div>
					   </div>
                     </div>
					 </form>
                  </div>
               </div>
            </div>
         </div>
         <!-- end row -->
      </div>
      <!-- container -->
   </div>
</div>
<!-- ============================================================== -->
<!-- End Right content here -->
<script src="/admin/js/jquery.validate.min.js"></script>
<script>
$.validator.setDefaults({
	submitHandler: function() {
		document.forms["edit_form"].submit();
	}
});

jQuery.validator.addMethod("validate_email",function(value, element) {
	if(/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test( value )) {
	   return true;
	}
	else {
	  return false;
	}    
},"Please enter a valid email address!");

$("#edit_form").validate({
	rules: {
	    firstname: "required",
		lastname: "required",
		email: {
			required: true,
			validate_email:true			
		},
		username: "required"
	},
	messages: {
		firstname: "Please enter your first name!",
		lastname: "Please enter your last name!",
		email: {
			required: "Please enter your email address!"                            
		},
		username: "Please enter your username!"
	}
});


setTimeout(function(){ 
	$(".alert").fadeOut('slow'); 
}, 3000);
</script>